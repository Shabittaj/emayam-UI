<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Signup and Login</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <!-- <div class="title-container" style="display: flex; justify-content: center;">
        <h1>Emayam Technology</h1>
    </div> -->
    <div class="container">
        <div class="form-container" id="signup-container">
            <h2>Signup</h2>
            <form id="signup-form">
                <input type="text" id="signup-email" placeholder="Email" required>
                <input type="text" id="signup-first-name" placeholder="First Name" required>
                <input type="text" id="signup-last-name" placeholder="Last Name" required>
                <input type="text" id="signup-phone-number" placeholder="Phone Number" required>
                <select id="signup-role" required>
                    <option value="" disabled selected>Select Role</option>
                    <option value="admin">Admin</option>
                    <option value="editor">Editor</option>
                    <option value="viewer">Viewer</option>
                </select>

                <input type="password" id="signup-password" placeholder="Password" required>

                <button type="submit">Sign Up</button>
                <a href="login.html">I have already account</a>
            </form>
        </div>
        <script>
            document.getElementById('signup-form').addEventListener('submit', async function (event) {
                event.preventDefault();

                const email = document.getElementById('signup-email').value;
                const firstName = document.getElementById('signup-first-name').value;
                const lastName = document.getElementById('signup-last-name').value;
                const phoneNumber = document.getElementById('signup-phone-number').value;
                const role = document.getElementById('signup-role').value;
                const password = document.getElementById('signup-password').value;

                const response = await fetch('https://emayam-api.onrender.com/app/v1/auth/register/', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        email: email,
                        firstName: firstName,
                        lastName: lastName,
                        phoneNumber: phoneNumber,
                        role: role,
                        password: password,
                    }),
                });

                const data = await response.json();

                if (response.ok) {
                    alert('Signup successful! You can now log in.');
                    window.location.href = 'login.html';
                } else {
                    alert('Signup failed: ' + JSON.stringify(data));
                }
            });
        </script>

        <!-- <script src="scripts.js"></script> -->
</body>

</html>